<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/productos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Enlaza la librería Font Awesome para usar íconos -->
    <title>productos</title>
</head>

<body>

  <!--  boton de compras -->
  <div class="cart-icon">
    <button type="submit">
      <a href="html/carrito.html">
        <i class="fa-solid fa-cart-shopping" style="color: #121212;"></i>
      </a>
    </button>
  </div>

  <section>

    <div class="title-container">
      <h2><span class="flash">Flash</span> <span class="sales">Sales</span></h2>
    </div>

    <!-- Botones para deslizar horizontalmente los productos -->
    <div class="scroll-controls">
      <button class="scroll-btn" id="scrollLeftBtn">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button class="scroll-btn" id="scrollRightBtn">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <!-- contiene productos -->
    <div class="products-container">
      <div class="products" id="products">

        <!-- Producto 1 -->
        <div class="product">
          <div class="discount">-40%</div> <!-- Descuento -->
          <div class="icons">
            <i class="fas fa-heart"></i>  <!-- corazon favoritos -->
            <i class="fas fa-eye"></i>    <!-- vista ojo -->
          </div>

          <div class="product-image-wrapper">
            <img src="img/asus.png" alt="Gamepad">
            <button class="add-to-cart-btn">Añadir al carrito</button> <!-- Boton Añadir al carrito -->
          </div>

          <p class="product-title">Portatil ASUS A14</p> <!-- Nombre producto -->
          <p class="price">$120 <span class="old-price">$160</span></p> <!-- Precio actual y anterior -->
          <p class="rating">★★★★★ (88)</p> <!-- Calificación del producto -->
        </div>

        <!-- Producto 2 -->
        <div class="product">
          <div class="discount">-35%</div>
          <div class="icons">
            <i class="fas fa-heart"></i>
            <i class="fas fa-eye"></i>
          </div>
          <div class="product-image-wrapper">
            <img src="img/teclado.webp" alt="AK-900 Keyboard">
            <button class="add-to-cart-btn">Añadir al carrito</button>
          </div>
          <p class="product-title">AK-900 Wired Keyboard</p>
          <p class="price">$960 <span class="old-price">$1160</span></p>
          <p class="rating">★★★★★ (75)</p>
        </div>

        <!-- Producto 3 -->
        <div class="product">
          <div class="discount">-30%</div>
          <div class="icons">
            <i class="fas fa-heart"></i>
            <i class="fas fa-eye"></i>
          </div>
          <div class="product-image-wrapper">
            <img src="img/pantalla.webp" alt="IPS Monitor">
            <button class="add-to-cart-btn">Añadir al carrito</button>
          </div>
          <p class="product-title">IPS LCD Gaming Monitor</p>
          <p class="price">$370 <span class="old-price">$400</span></p>
          <p class="rating">★★★★★ (99)</p>
        </div>

        <!-- Producto 4 -->
        <div class="product">
          <div class="discount">-25%</div>
          <div class="icons">
            <i class="fas fa-heart"></i>
            <i class="fas fa-eye"></i>
          </div>
          <div class="product-image-wrapper">
            <img src="img/silla.png" alt="Comfort Chair">
            <button class="add-to-cart-btn">Añadir al carrito</button>
          </div>
          <p class="product-title">S-Series Comfort Chair</p>
          <p class="price">$375 <span class="old-price">$400</span></p>
          <p class="rating">★★★★★ (99)</p>
        </div>

        <!-- Producto 5 -->
        <div class="product">
          <div class="discount">-20%</div>
          <div class="icons">
            <i class="fas fa-heart"></i>
            <i class="fas fa-eye"></i>
          </div>
          <div class="product-image-wrapper">
            <img src="img/diademas.webp" alt="Gaming Headset">
            <button class="add-to-cart-btn">Añadir al carrito</button>
          </div>
          <p class="product-title">Gaming Headset X7</p>
          <p class="price">$120 <span class="old-price">$150</span></p>
          <p class="rating">★★★★☆ (64)</p>
        </div>

        <!-- Producto 6 -->
        <div class="product">
          <div class="discount">-15%</div>
          <div class="icons">
            <i class="fas fa-heart"></i>
            <i class="fas fa-eye"></i>
          </div>
          <div class="product-image-wrapper">
            <img src="img/mouse.webp" alt="Wireless Mouse">
            <button class="add-to-cart-btn">Añadir al carrito</button>
          </div>
          <p class="product-title">Wireless Mouse Pro</p>
          <p class="price">$85 <span class="old-price">$100</span></p>
          <p class="rating">★★★★★ (92)</p>
        </div>

      </div> 
    </div> 

    <!--  ver  productos -->
    <div class="view-all">
      <button>View All Products</button>
    </div>

  </section>

  <!-- Script que maneja el evento "añadir al carrito" -->
  <script>
    document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            const producto = btn.closest('.product'); // Obtiene el contenedor del producto
            const nombre = producto.querySelector('.product-title').textContent.trim(); // Nombre del producto
            const precio = parseFloat(producto.querySelector('.price').textContent.replace('$','')); // Precio numérico

            console.log("Producto:", nombre, "Precio:", precio);  // Muestra en consola el producto

            // Llama a la API del carrito con método POST
            fetch('php/carrito_api.php?action=agregar', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `producto=${encodeURIComponent(nombre)}&precio=${precio}&cantidad=1`
            }).then(res => res.text()).then(data => {
                console.log("Respuesta del servidor:", data); // Muestra la respuesta del servidor
                alert("Producto agregado al carrito"); // Mensaje para el usuario
            });
        });
    });
  </script>

</body>
</html>
